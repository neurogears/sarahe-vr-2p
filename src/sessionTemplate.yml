%YAML 1.1
---
# yaml-language-server: $schema=schema.json

metadata:
  rootPath: C:/
  animalId: Mouse2
  randomSeed: null
  defaultEncoderGain: 0.0005
  trialOrder:
    mode: block
    blocks:
      [
        { size: 10, tailSize: 0, trialProbability: [1, 1, 0, 0, 0, 0] },
        { size: 10, tailSize: 0, trialProbability: [0, 0, 1, 1, 0, 0] },
        { size: 10, tailSize: 0, trialProbability: [0, 0, 0, 0, 1, 1] },
      ]
  rewardCalibration: {slope: 0.01, intercept: 0}
  waveformBankPath:
    - Assets\\Waveforms\\wf0.bin
    - Assets\\Waveforms\\wf1.bin
trials:
  [
    &trialTypeA
    {
      trialTypeLabel: "1",
      corridorSegments:
        [ &graywall
          {
            name: Gray,
            initialVisibility: true,
            positionStart: 0,
            positionEnd: 0.5,
            textureLeft: Assets\\Textures\\WP_single.png,
            textureRight: Assets\\Textures\\WP_single.png,
          },
          &landmark1
          {
            name: Landmark1,
            initialVisibility: true,
            positionStart: 0.5,
            positionEnd: 1,
            textureRight: Assets\\Textures\\LM1.png,
            textureLeft: Assets\\Textures\\LM1.png,
          },
          {<<: *graywall, positionStart: 1,positionEnd: 1.5},
          &stimA
          { 
            name: StimulusA,
            initialVisibility: true,
            positionStart: 1.5,
            positionEnd: 2,
            textureRight: Assets\\Textures\\WP_single.png,
            textureLeft: Assets\\Textures\\WP_single.png,
            stimControl:
            {
              location: 1.5,
              delay: 0,
              rightStimState: true,
              leftStimState: true,
              stimTextureLeft: Assets\\Textures\\A_single.png,
              stimTextureRight: Assets\\Textures\\A_single.png
            },
          },
          {<<: *graywall, positionStart: 2, positionEnd: 2.5},
          &landmark2
          {
            name: Landmark2,
            initialVisibility: true,
            positionStart: 2.5,
            positionEnd: 3,
            textureRight: Assets\\Textures\\LM2.png,
            textureLeft: Assets\\Textures\\LM2.png,
          },
          {<<: *graywall, positionStart: 3, positionEnd: 3.5},
          &stimB
          {
            name: StimulusB,
            initialVisibility: true,
            positionStart: 3.5,
            positionEnd: 4,
            textureRight: Assets\\Textures\\WP_single.png,
            textureLeft: Assets\\Textures\\WP_single.png,
            stimControl:
            {
              location: 3.5,
              delay: 0,
              rightStimState: true,
              leftStimState: true,
              stimTextureLeft: Assets\\Textures\\B_single.png,
              stimTextureRight: Assets\\Textures\\B_single.png
            },
          },
          {<<: *graywall, positionStart: 4, positionEnd: 4.5},
          &landmark3
          {
            name: Landmark3,
            initialVisibility: true,
            positionStart: 4.5,
            positionEnd: 5,
            textureRight: Assets\\Textures\\Reward.png,
            textureLeft: Assets\\Textures\\Reward.png,
          },
        ],
        reward:
        [
          {
            amountHigh: 5,
            amountLow: 1,
            probabilityHigh: 1,
            location: 4.75,
            delay: 0,
          }
        ],
      optoStim:
        [],
      teleportOnLick:
        [],
      teleport:
        [
          {
            lockAtLocation: true,
            location: 5,
            endTrialOnTeleport: true,
            lockAtLocationDuration: 0.5,
            destination: 0,
          }
        ],
      passiveMode:
        [
          { gain: 0.005, locationStart: 1.5, locationEnd: 2 },
          { gain: 0.005, locationStart: 3.5, locationEnd: 4 },
        ],
      floorSegments:
        [
          {
            name: Floor,
            initialVisibility: true,
            positionStart: 0,
            positionEnd: 5,
            texture: Assets\\Textures\\Floor.png,
          },
        ],
    },
    &trialTypeB
    {<<: *trialTypeA,
      trialTypeLabel: "2",
      corridorSegments:
        [ 
          {<<: *graywall, positionStart: 0, positionEnd: 0.5},
          {<<: *landmark1 },
          {<<: *graywall, positionStart: 1,positionEnd: 1.5},
          {<<: *stimA },
          {<<: *graywall, positionStart: 2, positionEnd: 2.5},
          {<<: *landmark2 },
          {<<: *graywall, positionStart: 3, positionEnd: 3.5},
          {<<: *stimB,
          stimControl:
            {
              location: 3.5,
              delay: 0,
              rightStimState: true,
              leftStimState: true,
              stimTextureLeft: Assets\\Textures\\D_single.png,
              stimTextureRight: Assets\\Textures\\D_single.png
            }
          },
          {<<: *graywall, positionStart: 4, positionEnd: 4.5},
          {<<: *landmark3 },
        ]
    },
    {<<: *trialTypeB,
      trialTypeLabel: "3",
      optoStim:
        [
        {delay: 0, location: 3.4, waveformIndex: 0},
        ],
    },
    {<<: *trialTypeA,
      trialTypeLabel: "4",
      corridorSegments:
        [ 
          {<<: *graywall, positionStart: 0, positionEnd: 0.5},
          {<<: *landmark1 },
          {<<: *graywall, positionStart: 1,positionEnd: 1.5},
          {<<: *stimA },
          {<<: *graywall, positionStart: 2, positionEnd: 2.5},
          {<<: *landmark2 },
          {<<: *graywall, positionStart: 3, positionEnd: 3.5},
          {<<: *stimB, textureRight: Assets\\Textures\\inspiration.jpg,
            textureLeft: Assets\\Textures\\inspiration.jpg},
          {<<: *graywall, positionStart: 4, positionEnd: 5},
          {<<: *landmark3, positionStart: 5, positionEnd: 5.5},
        ],
      reward:
        [
          {
            amountHigh: 5,
            amountLow: 1,
            probabilityHigh: 1,
            location: 5.25,
            delay: 0,
          }
        ],
      teleport:
        [
          {
            lockAtLocation: true,
            location: 5.5,
            endTrialOnTeleport: true,
            lockAtLocationDuration: 0.5,
            destination: 0,
          }
        ],
      floorSegments:
        [
          {
            name: Floor,
            initialVisibility: true,
            positionStart: 0,
            positionEnd: 5.5,
            texture: Assets\\Textures\\Floor.png,
          },
        ],
    },
    {<<: *trialTypeB,
      trialTypeLabel: "5",
      reward:
      [
        {
          amountHigh: 5,
          amountLow: 1,
          probabilityHigh: 0.8,
          location: 4.75,
          delay: 0,
        }
      ],
    },
    {<<: *trialTypeA,
      trialTypeLabel: "6",
      teleportOnLick:
        [ {
            destination: 0,
            locationStart: 0,
            locationEnd: 10,
            refractoryDuration: 0.5,
            maxRepeats: null
          } 
        ],
    },
    #{<<: *trialTypeA},
    #{<<: *trialTypeA},
    #{<<: *trialTypeA},
    #{<<: *trialTypeA},
  ]